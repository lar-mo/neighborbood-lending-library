{% extends 'lendingLibrary/base.html' %}

{% block title %}
<title>Category - Neighborhood Lending Library</title>
{% endblock %}

{% block heading %}
<h2>Items in "{{category_name|title}}"</h2>
{% endblock %}

{% block content %}
  <div id="item_list">
    {% if items %}
      <table>
        <tr>
          <th>Category</th>
          <th align="left">Item</th>
          <th align="left">Description</th>
          <th>Status</th>
          <th>Owner</th>
        </tr>
        {% for item in items %}
        <tr>
          <td align="center">{{item.category|title}}</td>
          {% if item.category.name == "books" %}
            <td><span class="item_title">"{{item.name}}"</span></td>
          {% else %}
            <td><span class="item_title">{{item.name}}</span></td>
          {% endif %}
          <!-- <td><span class="item_description" style="width: 580px">{{item.description}}</span></td> -->
          {% if item.description != '' %}
            <td><span class="item_description" style="width: 580px">{{item.description}}</span></td>
          {% else %}
            <td><span class="item_description" style="width: 580px"><i>no description</i></span></td>
          {% endif %}
          {% if item.item_status.name == 'Available' %}
            <td style="background-color:lightgreen" align="center">{{item.item_status}}</td>
          {% elif item.item_status.name == 'Unavailable' %}
            <td style="background-color:yellow" align="center">{{item.item_status}}</td>
          {% elif item.item_status.name == 'Checked Out' %}
            <td style="background-color:pink" align="center">{{item.item_status}}</td>
          {% elif item.item_status.name == "Requested" %}
            <td style="background-color:blue;color:#FFF" align="center">{{item.item_status}}</td>
          {% elif item.item_status.name == 'Hidden' %}
            <td style="background-color:#777;color:#FFF" align="center">{{item.item_status}}</td>
          {% elif item.item_status.name == 'Lost' %}
            <td style="background-color:#333;color:#FFF" align="center">{{item.item_status}}</td>
          {% else %}
            <td style="background-color:white">{{item.item_status}}</td>
          {% endif %}
          {% if item.owner.username == request.user.username %}
            <td align="center"><a href="{% url 'lendingLibrary:my_items' %}">{{item.owner.username|title}}</a></td>
          {% else %}
            <td align="center"><a href="/user/{{item.owner.id}}/">{{item.owner.username|title}}</a></td>
          {% endif %}
        </tr>
        {% endfor %}
      </table>
    {% else %}
      <p><i>You don't have any items to lend</i></p>
    {% endif %}
  </div> <!-- end of 'item_list' -->
{% endblock %}
